SET DEFINE OFF;
CREATE OR REPLACE FUNCTION FN_CHECK_BANKACCTNO(P_BANKACCTNO VARCHAR2, P_CITAD VARCHAR2 default '') RETURN NUMBER IS
  V_RESULT NUMBER;
  V_COUNT NUMBER;
BEGIN
  IF P_CITAD IS NULL THEN
      SELECT NVL(COUNT(*),0) INTO V_COUNT FROM DDMAST DD WHERE DD.REFCASAACCT = P_BANKACCTNO;
      IF V_COUNT > 0 THEN
         V_RESULT := 0;
      ELSE
         V_RESULT := 1;
      END IF;
   ELSE
      V_RESULT := 0;
   END IF;
   RETURN(V_RESULT);
EXCEPTION
   WHEN OTHERS THEN
    RETURN 1;
END FN_CHECK_BANKACCTNO;
/

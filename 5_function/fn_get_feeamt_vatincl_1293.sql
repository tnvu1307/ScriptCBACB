SET DEFINE OFF;
CREATE OR REPLACE FUNCTION fn_get_feeamt_vatincl_1293(PV_FEEAMT IN VARCHAR2, PV_VATAMT IN VARCHAR2, PV_CCYCD IN VARCHAR2, PV_FEETYPE IN VARCHAR2, PV_PRIVATECCYCD IN VARCHAR2)
RETURN NUMBER
IS --NAM.LY 27/04/2020
  V_FEEAMT  NUMBER;
  V_VATAMT  NUMBER;
  V_RESULT  NUMBER;
BEGIN
    V_FEEAMT  := TO_NUMBER(PV_FEEAMT);
    V_VATAMT  := TO_NUMBER(PV_VATAMT);
    --
    V_RESULT := V_FEEAMT + PV_VATAMT;
    --
    IF PV_FEETYPE = '003' THEN
        IF (PV_PRIVATECCYCD = 'USD') THEN
           V_RESULT := ROUND(V_RESULT,2);
        ELSIF (PV_PRIVATECCYCD = 'VND') THEN
           V_RESULT := ROUND(V_RESULT,0);
        END IF;
    ELSE
        IF (PV_CCYCD = 'USD') THEN
           V_RESULT := ROUND(V_RESULT,2);
        ELSIF (PV_CCYCD = 'VND') THEN
           V_RESULT := ROUND(V_RESULT,0);
        END IF;
    END IF;
    RETURN V_RESULT;
    EXCEPTION WHEN OTHERS THEN RETURN 0;
END;
/

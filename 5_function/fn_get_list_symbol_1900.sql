SET DEFINE OFF;
CREATE OR REPLACE FUNCTION FN_GET_LIST_SYMBOL_1900(PV_ISSUECODE IN VARCHAR2)
RETURN VARCHAR2 IS
    v_Result varchar2(500);
BEGIN
    SELECT LISTBONDSYMBOL INTO v_Result
    FROM (
        SELECT BI.ISSUESID, ISS.ISSUECODE FILTERCD, LISTAGG(BONDSYMBOL,', ') WITHIN GROUP(ORDER BY ISSUESID ) LISTBONDSYMBOL
        FROM BONDISSUE BI, ISSUES ISS
        WHERE BI.ISSUESID = ISS.AUTOID
        GROUP BY ISSUESID, ISS.ISSUECODE
    )
    WHERE FILTERCD = PV_ISSUECODE;

    RETURN v_Result;
EXCEPTION WHEN OTHERS THEN
    RETURN '';
END;
/

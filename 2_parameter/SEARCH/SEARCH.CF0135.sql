SET DEFINE OFF;DELETE FROM SEARCH WHERE 1 = 1 AND NVL(SEARCHCODE,'NULL') = NVL('CF0135','NULL');Insert into SEARCH   (SEARCHCODE, SEARCHTITLE, EN_SEARCHTITLE, SEARCHCMDSQL, OBJNAME, FRMNAME, ORDERBYCMDSQL, TLTXCD, CNTRECORD, ROWPERPAGE, AUTOSEARCH, INTERVAL, AUTHCODE, ROWLIMIT, CMDTYPE, CONDDEFFLD, BANKINQ, BANKACCT) Values   ('CF0135', 'Tạo yêu cầu mở tài khoản gửi VSD', 'Create open account request to VSD', 'SELECT MST.CUSTID, MST.CUSTODYCD, MST.FULLNAME, MST.CUSTTYPE,
    MST.IDTYPE, MST.COUNTRY, MST.ADDRESS, MST.MOBILESMS MOBILE, MST.EMAIL, MST.DESCRIPTION,
    A0.CDCONTENT VSD_IDTYPE, A1.CDCONTENT VSD_COUNTRY,
    A3.CDCONTENT DESC_IDTYPE, A4.CDCONTENT DESC_COUNTRY,MST.IDEXPIRED, MST.DATEOFBIRTH,
    (CASE WHEN  MST.IDTYPE <> ''009'' THEN MST.IDCODE ELSE MST.TRADINGCODE END) IDCODE,
    (CASE WHEN  MST.IDTYPE <> ''009'' THEN MST.IDDATE ELSE MST.TRADINGCODEDT END) IDDATE,
    (CASE WHEN  MST.IDTYPE <>''009'' THEN MST.IDPLACE ELSE ''Trung tâm lưu ký chứng khoán Việt Nam'' END) IDPLACE
FROM
    (SELECT * FROM CFMAST WHERE CUSTODYCD IS NOT NULL AND (MCUSTODYCD IS NULL OR MCUSTODYCD = '''')) MST,
    (SELECT * FROM ALLCODE WHERE CDNAME = ''VSDIDTYPE'' AND CDTYPE=''SA'') A0,
    (SELECT * FROM ALLCODE WHERE CDTYPE=''CF'' AND CDNAME=''NATIONAL'') A1,
    (SELECT * FROM ALLCODE WHERE CDTYPE=''CF'' AND CDNAME=''IDTYPE'') A3,
    (SELECT * FROM ALLCODE WHERE CDTYPE=''CF'' AND CDNAME=''COUNTRY'') A4,
    (SELECT * FROM SYSVAR WHERE VARNAME = ''COMPANYCD'') SY
WHERE MST.NSDSTATUS IN (''P'',''R'',''N'')
AND MST.STATUS <> ''P''
AND MST.ACTIVESTS IN (''N'',''P'')
AND MST.IDTYPE = A0.CDVAL(+)
AND MST.COUNTRY = A1.CDVAL(+)
AND MST.IDTYPE = A3.CDVAL(+)
AND MST.COUNTRY = A4.CDVAL(+)
AND SUBSTR(MST.CUSTODYCD,0,3) = NVL(SY.VARVALUE,''SHV'')', 'CFMAST', 'frmSATLID', 'CUSTODYCD', '0035', 0, 5000, 'N', 1, 'NYNNYYYNNN', 'Y', 'T', '', 'N', '');COMMIT;
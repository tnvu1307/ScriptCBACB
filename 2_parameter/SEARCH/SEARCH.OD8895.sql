SET DEFINE OFF;DELETE FROM SEARCH WHERE 1 = 1 AND NVL(SEARCHCODE,'NULL') = NVL('OD8895','NULL');Insert into SEARCH   (SEARCHCODE, SEARCHTITLE, EN_SEARCHTITLE, SEARCHCMDSQL, OBJNAME, FRMNAME, ORDERBYCMDSQL, TLTXCD, CNTRECORD, ROWPERPAGE, AUTOSEARCH, INTERVAL, AUTHCODE, ROWLIMIT, CMDTYPE, CONDDEFFLD, BANKINQ, BANKACCT) Values   ('OD8895', 'Hủy lệnh đã sinh chưa thanh toán', 'Cancel order unpaid', 'SELECT OD.ORDERID, OD.CODEID, OD.SYMBOL, OD.CUSTODYCD, OD.CUSTID, OD.DDACCTNO, OD.SEACCTNO, OD.TXNUM, OD.TXDATE, OD.TRADE_DATE, OD.CLEARDATE SETT_DATE, OD.ORDERQTTY, OD.FEEAMT, OD.TAXAMT, OD.EXECAMT,
    A1.<@CDCONTENT> ASSETTYPE
FROM ODMAST OD, STSCHD ST, SBSECURITIES SB,
(SELECT * FROM ALLCODE WHERE CDTYPE = ''OD'' AND CDNAME = ''ASSETTYPE'') A1
WHERE OD.ISPAYMENT <> ''Y''
AND OD.ORSTATUS NOT IN(''3'',''5'', ''7'')
AND OD.ORDERID = ST.ORDERID
AND OD.ODTYPE <> ''SWE''
AND ST.DUETYPE IN (''RM'',''SM'')
AND OD.CLEARDATE >= GETCURRDATE
AND OD.MEMBER IS NOT NULL
AND OD.CODEID = SB.CODEID
AND (CASE WHEN SB.TRADEPLACE = ''099'' THEN ''TPRL'' ELSE ''CKNY'' END) = A1.CDVAL(+)
AND NOT EXISTS (
    SELECT F.CVALUE
    FROM TLLOG TL, TLLOGFLD F
    WHERE TL.TXNUM = F.TXNUM
    AND TL.TXDATE = F.TXDATE
    AND TL.TLTXCD = ''8803''
    AND F.FLDCD = ''06''
    AND TL.TXSTATUS IN(''1'', ''4'')
    AND F.CVALUE = OD.ORDERID
)', 'OD8895', '', 'orderid desc', '8803', 0, 5000, 'N', 30, 'NNNNYYYNNN', 'N', 'T', '', 'N', '');COMMIT;
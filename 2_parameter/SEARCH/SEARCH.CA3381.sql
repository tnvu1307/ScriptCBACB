SET DEFINE OFF;DELETE FROM SEARCH WHERE 1 = 1 AND NVL(SEARCHCODE,'NULL') = NVL('CA3381','NULL');Insert into SEARCH   (SEARCHCODE, SEARCHTITLE, EN_SEARCHTITLE, SEARCHCMDSQL, OBJNAME, FRMNAME, ORDERBYCMDSQL, TLTXCD, CNTRECORD, ROWPERPAGE, AUTOSEARCH, INTERVAL, AUTHCODE, ROWLIMIT, CMDTYPE, CONDDEFFLD, BANKINQ, BANKACCT) Values   ('CA3381', 'Đăng ký bán CP lẻ liên quan đến thực hiện quyền', 'Odd lot trading for CA', 'SELECT   CA.balance ,CA.qtty,mod(CA.qtty,info.tradelot) retail_qtty , SUBSTR(CAMAST.CAMASTID,1,4) || ''.''|| SUBSTR(CAMAST.CAMASTID,5,6) ||''.'' || SUBSTR(CAMAST.CAMASTID,11,6) CAMASTID, CA.AFACCTNO, CF.IDCODE,CF.FULLNAME, CF.CIFID,
    SYM.SYMBOL , A1.CDCONTENT STATUS,CA.AFACCTNO || CAMAST.CODEID  SEACCTNO,SYM.PARVALUE PARVALUE,  CAMAST.REPORTDATE REPORTDATE, CAMAST.ACTIONDATE,CAMAST.EXPRICE,CAMAST.PRICE,  mod(CA.qtty,info.tradelot)* CAMAST.PRICE RETAIL_AMT, A0.cdcontent CATYPE, CF.CUSTODYCD, camast.isincode
  FROM  SBSECURITIES SYM, securities_info info, ALLCODE A0, ALLCODE A1, CAMAST, CASCHD CA, AFMAST AF, CFMAST CF
     WHERE A1.CDTYPE = ''CA'' AND A1.CDNAME = ''CASTATUS'' AND A1.CDVAL = CA.STATUS AND CAMAST.CODEID = SYM.CODEID AND CAMAST.status in (''A'',''S'')
        AND  CAMAST.catype=''011''AND CA.camastid = CAMAST.camastid
         AND CA.status in(''A'',''S'') AND CA.DELTD <>''Y'' AND mod(CA.qtty,info.tradelot) >0
          and sym.codeid = info.codeid AND A0.CDTYPE = ''CA'' AND A0.CDNAME = ''CATYPE''
           AND A0.CDVAL = CAMAST.CATYPE AND AF.ACCTNO = CA.AFACCTNO AND AF.CUSTID = CF.CUSTID', 'CAMAST', NULL, NULL, '3381', NULL, 5000, 'N', 1, 'NYNNYYYNNN', 'Y', 'T', NULL, 'N', NULL);COMMIT;
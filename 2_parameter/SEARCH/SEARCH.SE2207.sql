SET DEFINE OFF;DELETE FROM SEARCH WHERE 1 = 1 AND NVL(SEARCHCODE,'NULL') = NVL('SE2207','NULL');Insert into SEARCH   (SEARCHCODE, SEARCHTITLE, EN_SEARCHTITLE, SEARCHCMDSQL, OBJNAME, FRMNAME, ORDERBYCMDSQL, TLTXCD, CNTRECORD, ROWPERPAGE, AUTOSEARCH, INTERVAL, AUTHCODE, ROWLIMIT, CMDTYPE, CONDDEFFLD, BANKINQ, BANKACCT) Values   ('SE2207', 'Tra cứu số dư không lưu ký', 'Non-depository balance inquiry', 'SELECT CF.CUSTODYCD, CF.FULLNAME, CF.IDCODE, SB.SYMBOL, NVL(SE_TMP.TRADE, 0) TRADE
FROM SEMAST SE,
(
    SELECT AFACCTNO, ACCTNO,CODEID, TRADE FROM SENOCUSTATCOM WHERE (ACCTNO,TXDATE) IN (SELECT ACCTNO, MAX(TXDATE) FROM SENOCUSTATCOM GROUP BY ACCTNO)
    UNION ALL
    SELECT AFACCTNO,ACCTNO, BONDCODE CODEID, TRADE FROM BONDSEMAST
) SE_TMP, SBSECURITIES SB, AFMAST AF, CFMAST CF
WHERE CF.CUSTID = AF.CUSTID
AND AF.ACCTNO = SE.AFACCTNO
AND SE.CODEID = SB.CODEID
AND CF.CUSTATCOM = ''N''
AND CF.STATUS <> ''C''
AND SE.ACCTNO = SE_TMP.ACCTNO (+)
AND NVL(SE_TMP.TRADE, 0) > 0', 'SEMAST', NULL, 'CUSTODYCD', NULL, NULL, 5000, 'N', 1, 'NNNNYYYNNN', 'Y', 'T', NULL, 'N', NULL);COMMIT;
SET DEFINE OFF;DELETE FROM SEARCH WHERE 1 = 1 AND NVL(SEARCHCODE,'NULL') = NVL('SE2288','NULL');Insert into SEARCH   (SEARCHCODE, SEARCHTITLE, EN_SEARCHTITLE, SEARCHCMDSQL, OBJNAME, FRMNAME, ORDERBYCMDSQL, TLTXCD, CNTRECORD, ROWPERPAGE, AUTOSEARCH, INTERVAL, AUTHCODE, ROWLIMIT, CMDTYPE, CONDDEFFLD, BANKINQ, BANKACCT) Values   ('SE2288', 'Tra cứu danh sách chứng khoán', 'View stock list', 'SELECT  ISS.ISSUERID, ISS.SHORTNAME, ISS.FULLNAME,SI.oldcirculatingqtty,si.newcirculatingqtty,sb.FOREIGNRATE,
(CASE WHEN (SB.SECTYPE IN (''003'',''006'') AND SB.BONDTYPE =''005'' AND SB.TRADEPLACE IN (''001'',''002'',''005'')) OR SB.SECTYPE IN(''001'',''002'') THEN  TO_CHAR(UTILS.SO_THANH_CHU(SI.BASICPRICE)) ELSE '''' END) MARKET_PRICE,
SB.SYMBOL,SB.BONDNAME,SB.ISINCODE,NVL(SB.PARVALUE,0) PARVALUE,A1.<@CDCONTENT> CCYCD,TO_CHAR(SB.ISSUEDATE,''DD/MM/RRRR'') ISSUEDATE,A2.<@CDCONTENT> TYPETERM,SB.TERM,
(CASE WHEN SB.SECTYPE not in (''011'',''015'') THEN TO_CHAR(SB.EXPDATE,''DD/MM/RRRR'') ELSE TO_CHAR(SB.maturitydate,''DD/MM/RRRR'') END) EXPDATE,NVL(SB.INTCOUPON,0) INTCOUPON,
NVL(SB.INTPREMATURE,0) INTPREMATURE,SB.INTERESTDATE,A3.<@CDCONTENT> ISBUYSELL,A4.<@CDCONTENT> SECTYPE,A5.<@CDCONTENT> ISSEDEPOFEE,A6.<@CDCONTENT> TRADEPLACE,SB.CODEID,
A7.<@CDCONTENT> BONDTYPE,SB.CONTRACTNO,A8.<@CDCONTENT> DEPOSITORY
FROM SBSECURITIES SB
JOIN ISSUERS ISS ON SB.ISSUERID=ISS.ISSUERID
JOIN SECURITIES_INFO SI ON SB.CODEID=SI.CODEID
LEFT JOIN (SELECT AL.*, SBC.CCYCD FROM ALLCODE AL JOIN SBCURRENCY SBC ON AL.CDVAL=SBC.SHORTCD) A1 ON A1.CDNAME=''CCYCD'' AND A1.CDTYPE =''FA'' AND A1.CCYCD=SB.CCYCD
LEFT JOIN ALLCODE A2 ON A2.CDNAME=''TYPETERM'' AND A2.CDTYPE=''SA'' AND A2.CDVAL=SB.TYPETERM
LEFT JOIN ALLCODE A3 ON A3.CDNAME=''ISBUYSELL'' AND A3.CDTYPE=''SE'' AND A3.CDVAL=SB.ISBUYSELL
LEFT JOIN ALLCODE A4 ON A4.CDTYPE=''SA'' AND A4.CDNAME=''SECTYPE'' AND A4.CDVAL=SB.SECTYPE
LEFT JOIN ALLCODE A5 ON A5.CDNAME=''YESNO'' AND A5.CDTYPE=''SY'' AND A5.CDVAL=SB.ISSEDEPOFEE
LEFT JOIN ALLCODE A6 ON A6.CDTYPE=''SA'' AND A6.CDNAME=''TRADEPLACE'' AND A6.CDVAL=SB.TRADEPLACE
LEFT JOIN ALLCODE A7 ON A7.CDTYPE=''SA'' AND A7.CDNAME=''BONDTYPE'' AND A7.CDVAL=SB.BONDTYPE
LEFT JOIN ALLCODE A8 ON A8.CDTYPE=''SA'' AND A8.CDNAME=''DEPOSITORY'' AND A8.CDVAL = SB.DEPOSITORY', 'SEMAST', 'frmSEMAST', 'ISSUERID, CODEID', '', 0, 5000, 'N', 30, 'NNNNYYYNNN', 'Y', 'T', '', 'N', '');COMMIT;
SET DEFINE OFF;DELETE FROM SEARCH WHERE 1 = 1 AND NVL(SEARCHCODE,'NULL') = NVL('SE2255','NULL');Insert into SEARCH   (SEARCHCODE, SEARCHTITLE, EN_SEARCHTITLE, SEARCHCMDSQL, OBJNAME, FRMNAME, ORDERBYCMDSQL, TLTXCD, CNTRECORD, ROWPERPAGE, AUTOSEARCH, INTERVAL, AUTHCODE, ROWLIMIT, CMDTYPE, CONDDEFFLD, BANKINQ, BANKACCT) Values   ('SE2255', 'Gửi hồ sơ chuyển khoản chứng khoán ra ngoài(Giao dịch 2255)', 'Sending outward transfer request (2255)', 'SELECT DT.*,  A1.<@CDCONTENT> CREASON
FROM
(
    SELECT SEO.*, CF.FULLNAME, CF.CUSTODYCD, AF.ACCTNO AFACCTNO,
           SEC.SYMBOL, SE.COSTPRICE, CF.MCUSTODYCD,
           SEREQ.TRFTXNUM TRFNUM, NVL(SEREQ.REPCOD, CF2.PCOD) BUYRPCOD, NVL(SEREQ.PARVALUE, SEC.PARVALUE) PARVALUE, SEREQ.REASON,
           NVL(SEREQ.REDAAS, CASE WHEN SUBSTR(SEO.RECUSTODYCD,4,1) = ''E'' THEN ''CSD''
                                 WHEN CF2.COUNTRY = ''234'' THEN NVL(D.BICCODE, ''XXAAXXAA'') || ''-CUSD''
                                 WHEN CF2.COUNTRY <> ''234'' THEN NVL(D.BICCODE, ''XXAAXXAA'') || ''-CUSF''
                             ELSE NVL(D.BICCODE, ''XXAAXXAA'') || ''-CUSD'' END) BUYRDAAS
    FROM SESENDOUT SEO, CFMAST CF, AFMAST AF, SBSECURITIES SEC, SEMAST SE, CFMAST CF2, DEPOSIT_MEMBER D, SESEND_REQ SEREQ,
    (
        SELECT * FROM SYSVAR WHERE GRNAME = ''SYSTEM'' AND VARNAME = ''COMPANYSHORTNAME''
    ) S1
    WHERE SUBSTR(SEO.ACCTNO,0,10) = AF.ACCTNO
    AND AF.CUSTID = CF.CUSTID
    AND SEC.CODEID = SEO.CODEID
    AND SE.ACCTNO = SEO.ACCTNO
    AND SEO.RECUSTODYCD = CF2.CUSTODYCD (+)
    AND SEO.OUTWARD = D.DEPOSITID (+)
    AND SEO.TRADE+SEO.BLOCKED+SEO.CAQTTY>0
    AND SEO.DELTD = ''N''
    AND SEO.AUTOIDREQ = SEREQ.AUTOID(+)
) DT,
(SELECT * FROM ALLCODE WHERE CDNAME = ''PURPOSESEND2255'' AND CDTYPE = ''SY'') A1
WHERE DT.REASON = A1.CDVAL(+)
AND 0 = 0', 'SEMAST', 'frmSEMAST', '', '2255', 0, 5000, 'N', 1, 'NYNNYYYNNN', 'Y', 'T', '', 'N', '');COMMIT;
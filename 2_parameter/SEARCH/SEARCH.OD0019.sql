SET DEFINE OFF;DELETE FROM SEARCH WHERE 1 = 1 AND NVL(SEARCHCODE,'NULL') = NVL('OD0019','NULL');Insert into SEARCH   (SEARCHCODE, SEARCHTITLE, EN_SEARCHTITLE, SEARCHCMDSQL, OBJNAME, FRMNAME, ORDERBYCMDSQL, TLTXCD, CNTRECORD, ROWPERPAGE, AUTOSEARCH, INTERVAL, AUTHCODE, ROWLIMIT, CMDTYPE, CONDDEFFLD, BANKINQ, BANKACCT) Values   ('OD0019', 'Quản lý xác nhận lệnh TRPL (VSTP 1704)', 'EN: Quản lý xác nhận lệnh TRPL (VSTP 1704)', 'SELECT ODV.AUTOID, ODV.VSDORDERID, ODV.ORDERID, TO_NUMBER(ODV.QUANTITY) QTTY, TO_NUMBER(ODV.PRICE) PRICE, TO_NUMBER(ODV.GROSSAMOUNT) AMT, TO_DATE(ODV.SETTLE_DATE, ''DD/MM/RRRR'') CLEARDATE, 
    (CASE WHEN ODV.ISPAYMENT = ''Y'' THEN TO_NUMBER(ODV.GROSSAMOUNT) ELSE 0 END) COMPLETE_AMT, 
    (CASE WHEN ODV.ISODMAST = ''N'' THEN ''REJT'' ELSE ''CONF'' END) DEFAULT_CONF,
    CF.FULLNAME, CF.CIFID, CF.CUSTODYCD, 
    SB.SYMBOL, SB.CODEID,
    FA.SHORTNAME BROKER,
    A1.<@CDCONTENT> EXECTYPE, A2.<@CDCONTENT> CFVSD, A3.<@CDCONTENT> CFVSDSTS, A4.<@CDCONTENT> ISODMAST
FROM DEPOSIT_MEMBER FA,
(SELECT * FROM SBSECURITIES WHERE TRADEPLACE IN (''099'')) SB,
(SELECT * FROM ODMASTVSD  WHERE DELTD = ''N'' AND VSDORDERID IS NOT NULL) ODV,
(SELECT * FROM CFMAST WHERE STATUS NOT IN (''C'')) CF,
(SELECT * FROM SYSVAR WHERE GRNAME = ''SYSTEM'' AND VARNAME = ''CURRDATE'') CRD,
(SELECT * FROM ALLCODE WHERE CDNAME = ''EXECTYPE'' AND CDTYPE = ''OD'') A1,
(SELECT * FROM ALLCODE WHERE CDNAME = ''CONFIRM_STATUS'' AND CDTYPE = ''ST'') A2,
(SELECT * FROM ALLCODE WHERE CDNAME = ''VSDTXREQSTS'' AND CDTYPE = ''SA'') A3,
(SELECT * FROM ALLCODE WHERE CDNAME = ''YESNO'' AND CDTYPE = ''SY'') A4
WHERE ODV.CUSTODYCD = CF.CUSTODYCD
AND ODV.BROKER_CODE = FA.DEPOSITID(+)
AND ODV.SEC_ID = SB.SYMBOL
AND TO_DATE(ODV.SETTLE_DATE, ''DD/MM/RRRR'') = TO_DATE(CRD.VARVALUE,''DD/MM/RRRR'')
AND ODV.TRANS_TYPE = A1.CDVAL(+)
AND ODV.CFVSD = A2.CDVAL(+)
AND ODV.CFVSDSTS = A3.CDVAL(+)
AND TRIM(ODV.ISODMAST) = A4.CDVAL(+)', 'OD0019', 'frmOD0019', 'AUTOID DESC', '8821', NULL, 5000, 'N', 30, 'NNNNYNYNNNN', 'Y', 'T', '', 'N', '');COMMIT;
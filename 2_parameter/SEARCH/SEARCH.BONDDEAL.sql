SET DEFINE OFF;DELETE FROM SEARCH WHERE 1 = 1 AND NVL(SEARCHCODE,'NULL') = NVL('BONDDEAL','NULL');Insert into SEARCH   (SEARCHCODE, SEARCHTITLE, EN_SEARCHTITLE, SEARCHCMDSQL, OBJNAME, FRMNAME, ORDERBYCMDSQL, TLTXCD, CNTRECORD, ROWPERPAGE, AUTOSEARCH, INTERVAL, AUTHCODE, ROWLIMIT, CMDTYPE, CONDDEFFLD, BANKINQ, BANKACCT) Values   ('BONDDEAL', 'Giao dịch trái phiếu', 'Bond trading', 'SELECT MST.AUTOID, A0.CDCONTENT STATUS, (CASE WHEN MST.DEALTYPE=''S'' THEN A1.CDCONTENT ELSE A1.CDCONTENT || '': '' || A2.CDCONTENT END) DEALTYPE,
MST.CUSTID, MST.TRANSDATE, MST.TXDATE, MST.PTXDATE, SB.SYMBOL, MST.QTTY, MST.NOTES,
(CASE WHEN MST.DEALTYPE=''S'' THEN ''BÊN BÁN: '' ELSE ''ĐƠN VỊ'' END) MSIZE,
CF.FULLNAME, MST.PRICE, MST.REFID,
(CASE WHEN MST.DEALTYPE=''S'' THEN ''BÊN MUA: '' ELSE ''---'' END) PSIZE,
(CASE WHEN MST.DEALTYPE=''S'' THEN RCF.FULLNAME ELSE ''---'' END) RFULLNAME,
MST.PCUSTID, MST.PPRICE, MST.PREFID, A3.CDCONTENT TREASURYBILL, sb.intcoupon
FROM BONDDEAL MST, CFMAST CF, SBSECURITIES SB, ALLCODE A0, ALLCODE A1, ALLCODE A2,allcode a3,
(SELECT CUSTID, FULLNAME FROM CFMAST UNION ALL SELECT ''NULL'' CUSTID, ''---'' FULLNAME FROM DUAL) RCF
WHERE MST.CUSTID=CF.CUSTID AND MST.CODEID=SB.CODEID AND NVL(MST.PCUSTID,''NULL'') = RCF.CUSTID
AND A0.CDTYPE=''SY'' AND A0.CDNAME=''TYPESTS'' AND A0.CDVAL=MST.STATUS
AND A1.CDTYPE=''SA'' AND A1.CDNAME=''DEALTYPE'' AND A1.CDVAL=MST.DEALTYPE
AND A2.CDTYPE=''SA'' AND A2.CDNAME=''BONDBORS'' AND A2.CDVAL=NVL(MST.BORS,''A'')
and mst.TREASURYBILL = a3.cdval and a3.cdtype = ''SY'' and a3.cdname = ''YESNO''
', 'BONDDEAL', 'frmBONDDEAL', NULL, NULL, NULL, 5000, 'N', 1, NULL, 'Y', 'T', NULL, 'N', NULL);COMMIT;
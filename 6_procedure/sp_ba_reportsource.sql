SET DEFINE OFF;
CREATE OR REPLACE PROCEDURE sp_ba_reportsource
   (PV_REFCURSOR   IN OUT   PKG_REPORT.REF_CURSOR,
   PV_TXDATE IN VARCHAR2,
   PV_BANKCODE   IN       VARCHAR2,
   PV_TRANTYPE   IN       VARCHAR2,
   PV_STATUS   IN       VARCHAR2,
   PV_SEARCHFILTER    IN       VARCHAR2
   )
   IS
BEGIN
    OPEN PV_REFCURSOR
    FOR
    SELECT GT.*,CF.FULLNAME FROM GWTRANSFERLOG GT,GWTRAN GW,AFMAST AF,CFMAST CF
    WHERE GT.TRANSTYPE=GW.MAPCODE
    AND GT.SECACCOUNT=AF.ACCTNO
    AND AF.CUSTID=CF.CUSTID
    AND GT.TRANSTYPE=PV_TRANTYPE
    AND GW.BANKCODE=PV_BANKCODE
    AND GT.PROCESSED=PV_STATUS
    AND GT.TXDATE=TO_DATE(PV_TXDATE,'DD/MM/RRRR');
EXCEPTION
    WHEN OTHERS THEN
        RETURN ;
END; -- Procedure

 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
/
